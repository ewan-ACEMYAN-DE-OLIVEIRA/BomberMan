<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="BomberMan.GameViewController"
            stylesheets="@../game.css">
    <top>
        <!-- Barre d'information du jeu façon Bomberman -->
        <VBox spacing="8.0" styleClass="info-panel">
            <padding>
                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
            </padding>

            <!-- Titre super Bomberman (style arcade) -->
            <Label fx:id="titleLabel" styleClass="title" text="SUPER BOMBERMAN" />

            <!-- Statut, score et timer dans la même barre -->
            <HBox alignment="CENTER" spacing="22.0">
                <Label text="Score:" styleClass="info-text"/>
                <Label fx:id="scoreLabel" styleClass="score-value" text="0" />

                <Region HBox.hgrow="ALWAYS" />

                <Label text="Timer:" styleClass="info-text"/>
                <Label fx:id="timerLabel" styleClass="timer-value" text="00:00" />

                <Region HBox.hgrow="ALWAYS" />

                <Label text="Statut:" styleClass="info-text"/>
                <Label fx:id="statusLabel" styleClass="status-value" text="Prêt à jouer" />
            </HBox>

            <!-- Boutons de contrôle -->
            <HBox alignment="CENTER" spacing="15.0">
                <Button fx:id="startButton" onAction="#handleStartGame" text="Démarrer" styleClass="game-btn"/>
                <Button fx:id="pauseButton" onAction="#handlePauseGame" text="Pause" styleClass="game-btn"/>
                <Button fx:id="resetButton" onAction="#handleResetGame" text="Reset" styleClass="game-btn"/>
                <Button fx:id="debugButton" onAction="#handleDebugGrid" text="Debug Grille" styleClass="game-btn"/>
            </HBox>
        </VBox>
    </top>

    <center>
        <ScrollPane fitToHeight="true" fitToWidth="true" hbarPolicy="AS_NEEDED" vbarPolicy="AS_NEEDED">
            <content>
                <VBox alignment="CENTER" spacing="10.0" styleClass="game-bg">
                    <padding>
                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                    </padding>

                    <!-- Ajoute une VBox pour regrouper la grille et la légende si tu veux le cadre autour des deux -->
                    <VBox alignment="CENTER" spacing="8.0">
                        <!-- Cadre orange autour de la grille SEULEMENT -->
                        <GridPane fx:id="gameGrid" alignment="CENTER" hgap="2.0" vgap="2.0" styleClass="game-grid game-grid-border" />
                    </VBox>

                    <!-- Légende des symboles en dehors du cadre orange -->
                    <VBox alignment="CENTER" spacing="8.0" styleClass="legend">
                        <Label styleClass="legend-title" text="Légende:" />
                        <HBox alignment="CENTER" spacing="15.0">
                            <HBox alignment="CENTER_LEFT" spacing="5.0">
                                <Region prefHeight="20.0" prefWidth="20.0" styleClass="cell-empty" />
                                <Label text="Case vide" />
                            </HBox>
                            <HBox alignment="CENTER_LEFT" spacing="5.0">
                                <Region prefHeight="20.0" prefWidth="20.0" styleClass="cell-wall" />
                                <Label text="Mur indestructible" />
                            </HBox>
                            <HBox alignment="CENTER_LEFT" spacing="5.0">
                                <Region prefHeight="20.0" prefWidth="20.0" styleClass="cell-destructible" />
                                <Label text="Mur destructible" />
                            </HBox>
                        </HBox>
                    </VBox>
                </VBox>
            </content>
        </ScrollPane>
    </center>

    <bottom>
        <!-- Barre de statut en bas -->
        <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="status-bar">
            <padding>
                <Insets bottom="5.0" left="10.0" right="10.0" top="5.0" />
            </padding>
            <Label text="Taille de la grille:" styleClass="info-text"/>
            <Label fx:id="gridSizeLabel" text="13 x 11" styleClass="info-value"/>
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="messageLabel" text="Utilisez les boutons pour contrôler le jeu" styleClass="message-label"/>
        </HBox>
    </bottom>
</BorderPane>
