<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="BomberMan.GameViewController">
    <top>
        <!-- Barre d'information du jeu -->
        <VBox spacing="10.0" styleClass="info-panel">
            <padding>
                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
            </padding>

            <!-- Titre du jeu -->
            <Label fx:id="titleLabel" styleClass="title" text="BomberMan - Grille de Jeu" />

            <!-- Informations de statut -->
            <HBox alignment="CENTER_LEFT" spacing="20.0">
                <Label text="Score:" />
                <Label fx:id="scoreLabel" styleClass="score-value" text="0" />

                <!-- Compteur de bombes -->
                <Label text="Bombes:" />
                <Label fx:id="bombLabel" styleClass="bomb-value" text="Bombes : 10 / 10" />

                <Region HBox.hgrow="ALWAYS" />

                <Label text="Statut:" />
                <Label fx:id="statusLabel" styleClass="status-value" text="Prêt à jouer" />
            </HBox>

            <!-- Boutons de contrôle -->
            <HBox alignment="CENTER" spacing="15.0">
                <Button fx:id="startButton" onAction="#handleStartGame" text="Démarrer" />
                <Button fx:id="pauseButton" onAction="#handlePauseGame" text="Pause" />
                <Button fx:id="resetButton" onAction="#handleResetGame" text="Reset" />
                <Button fx:id="debugButton" onAction="#handleDebugGrid" text="Debug Grille" />
            </HBox>
        </VBox>
    </top>

    <center>
        <!-- Conteneur principal de la grille de jeu -->
        <ScrollPane fitToHeight="true" fitToWidth="true" hbarPolicy="AS_NEEDED" vbarPolicy="AS_NEEDED">
            <content>
                <VBox alignment="CENTER" spacing="5.0">
                    <padding>
                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                    </padding>

                    <!-- GridPane pour la grille de jeu -->
                    <GridPane fx:id="gameGrid" alignment="CENTER" hgap="1.0" vgap="1.0" styleClass="game-grid">
                        <!-- Les cellules seront ajoutées dynamiquement par le contrôleur -->
                    </GridPane>

                    <!-- Légende des symboles -->
                    <VBox alignment="CENTER" spacing="5.0" styleClass="legend">
                        <Label styleClass="legend-title" text="Légende:" />

                        <HBox alignment="CENTER" spacing="15.0">
                            <HBox alignment="CENTER_LEFT" spacing="5.0">
                                <Region prefHeight="20.0" prefWidth="20.0" styleClass="cell-empty" />
                                <Label text="Case vide" />
                            </HBox>

                            <HBox alignment="CENTER_LEFT" spacing="5.0">
                                <Region prefHeight="20.0" prefWidth="20.0" styleClass="cell-wall" />
                                <Label text="Mur indestructible" />
                            </HBox>

                            <HBox alignment="CENTER_LEFT" spacing="5.0">
                                <Region prefHeight="20.0" prefWidth="20.0" styleClass="cell-destructible" />
                                <Label text="Mur destructible" />
                            </HBox>
                        </HBox>
                    </VBox>
                </VBox>
            </content>
        </ScrollPane>
    </center>

    <bottom>
        <!-- Barre de statut en bas -->
        <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="status-bar">
            <padding>
                <Insets bottom="5.0" left="10.0" right="10.0" top="5.0" />
            </padding>

            <Label text="Taille de la grille:" />
            <Label fx:id="gridSizeLabel" text="13 x 11" />

            <Region HBox.hgrow="ALWAYS" />

            <Label fx:id="messageLabel" text="Utilisez les boutons pour contrôler le jeu" />
        </HBox>
    </bottom>
</BorderPane>